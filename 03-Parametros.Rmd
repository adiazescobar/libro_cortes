# üìò Definici√≥n de estimadores, resultados potenciales e introducci√≥n al sesgo de selecci√≥n

---

## üéØ Metas de aprendizaje {-}

- Entender qu√© es un **resultado potencial**  
- Diferenciar entre **ATE**, **ATT**, **ATU** y el **estimador na√Øve**  
- Comprender la l√≥gica del **sesgo de selecci√≥n** y su relaci√≥n con los **contrafactuales**


## üìö Lecturas recomendadas  {-}

- **Lectura 1:** *The Credibility Revolution* - Angrist y Pischke (2010)  
  [Enlace al art√≠culo](https://www.aeaweb.org/articles?id=10.1257/jep.24.2.3)  
- **Lectura 2:** Bernal y Pe√±a ‚Äì Cap√≠tulo 2  
- **Lectura 3:** Bernal y Pe√±a ‚Äì Cap√≠tulo 3  

### üîπ Resultados potenciales  {-}

Para cada unidad \( i \), existen dos posibles resultados:

- \( Y_i(D=1) \): resultado si **recibe tratamiento**  
- \( Y_i(D=0) \): resultado si **no recibe tratamiento**

Pero solo observamos uno de ellos:

\[
Y_i = D_i \cdot Y_i(D=1) + (1 - D_i) \cdot Y_i(D=0)
\]

Donde:  
- \( D_i = 1 \) si la unidad fue tratada  
- \( D_i = 0 \) si no fue tratada

---

### üîπ Par√°metros de inter√©s  {-}

#### üìå Efecto Promedio del Tratamiento (ATE)  {-}

\[
ATE = \mathbb{E}[Y_i(D=1) - Y_i(D=0)]
\]

#### üìå Efecto Promedio del Tratamiento sobre los Tratados (ATT)  {-}

\[
ATT = \mathbb{E}[Y_i(D=1) - Y_i(D=0) \mid D_i = 1]
\]

#### üìå Efecto Promedio del Tratamiento sobre los No Tratados (ATU)  {-}

\[
ATU = \mathbb{E}[Y_i(D=1) - Y_i(D=0) \mid D_i = 0]
\]

#### üìå Estimador na√Øve (comparaci√≥n directa de medias)  {-}

\[
\mathbb{E}[Y_i \mid D_i = 1] - \mathbb{E}[Y_i \mid D_i = 0]
\]

---

### üîπ ¬øPor qu√© no es suficiente el estimador na√Øve?  {-}

El estimador na√Øve asume impl√≠citamente que:

\[
\mathbb{E}[Y_i(D=0) \mid D_i = 1] = \mathbb{E}[Y_i(D=0) \mid D_i = 0]
\]

Es decir, que los grupos tratados y no tratados son **comparables** en su resultado contrafactual.  
Este supuesto es **poco realista** si la asignaci√≥n al tratamiento est√° relacionada con factores que afectan el resultado, como motivaci√≥n, ingresos o necesidad.

---

### üîπ Sesgo de selecci√≥n  {-}

El **sesgo de selecci√≥n** se define como la diferencia entre el estimador na√Øve y el verdadero ATT:

\[
\text{Sesgo} = \left( \mathbb{E}[Y_i(D=1) \mid D_i = 1] - \mathbb{E}[Y_i(D=0) \mid D_i = 1] \right)
- \left( \mathbb{E}[Y_i(D=1) \mid D_i = 1] - \mathbb{E}[Y_i(D=0) \mid D_i = 0] \right)
\]

Lo que se reduce a:

\[
\text{Sesgo} = \mathbb{E}[Y_i(D=0) \mid D_i = 0] - \mathbb{E}[Y_i(D=0) \mid D_i = 1]
\]

> Si los no tratados (controles) tienen peores resultados potenciales que los tratados, el estimador na√Øve **sobreestima** el verdadero efecto del tratamiento. {-}


::: {.boxejercicio .green title="üß† Pausa activa: ¬øD√≥nde est√° el contrafactual?"}

## üî¢ Ejercicio en clase: Resultados potenciales y sesgo de selecci√≥n {-}

Supongamos que tenemos una muestra de 8 individuos. Algunos recibieron tratamiento (\(D = 1\)) y otros no (\(D = 0\)). Cada persona tiene dos resultados potenciales:

- \(Y(1)\): lo que obtendr√≠a si recibe el tratamiento  
- \(Y(0)\): lo que obtendr√≠a si no lo recibe

Pero solo observamos **uno** de esos dos valores:  
\[
Y_i = D_i \cdot Y_i(1) + (1 - D_i) \cdot Y_i(0)
\]

Datos

| ID | \(D_i\) | \(Y_i(D=0)\) | \(Y_i(D=1)\) | \(Y_i\)  |
|----|--------|------------|------------|-----|
| 1  | 1      | 10         | 12          | 12  |
| 2  | 0      | 4          | 5         | 4  |
| 3  | 1      | 9          | 10          | 10   |
| 4  | 1      | 10         | 11         | 11  |
| 5  | 0      | 5          | 6          | 5   |
| 6  | 0      | 3          | 2          | 3   |
| 7  | 1      | 12         | 11          | 11   |
| 8  | 0      | 5          | 7          | 5   |
---

*üéØ Preguntas para discutir en grupo*

1. ¬øCu√°l es el **contrafactual** que NO podemos observar para cada individuo?
2. Calcula el **efecto promedio del tratamiento sobre los tratados (ATT)**.
3. Calcula el **estimador na√Øve**:  
   \[
   \mathbb{E}[Y \mid D = 1] - \mathbb{E}[Y \mid D = 0]
   \]
4. ¬øCu√°l es el **sesgo de selecci√≥n** entre ambos estimadores?
5. Reflexiona: ¬øpor qu√© hay sesgo en este ejemplo? ¬øQu√© supuesto impl√≠cito est√° fallando?

üìå Pista:

Los individuos tratados tienen mejores valores de \(Y(0)\) (lo que habr√≠an obtenido sin tratamiento) que los no tratados.  
¬øEs v√°lido entonces comparar directamente los promedios observados entre grupos?

:::


### üîπ Sesgo en comparaciones antes-despu√©s (sin grupo de control) {-}

Una estrategia com√∫n es comparar el **resultado promedio antes y despu√©s del tratamiento** en el mismo grupo de individuos tratados:

\[
\text{Estimador Antes-Despu√©s} = \mathbb{E}[Y_{t=1} \mid D = 1] - \mathbb{E}[Y_{t=0} \mid D = 1]
\]

Este estimador es observable, pero **no necesariamente causal**, porque no tenemos el contrafactual de lo que habr√≠a pasado en \( t = 1 \) sin tratamiento.

¬øQu√© observamos?

- En \( t = 1 \), observamos \( Y(d=1) \): el resultado **con tratamiento**  
- En \( t = 0 \), observamos \( Y(d=0) \): el resultado **sin tratamiento**

Para identificar el efecto del tratamiento, lo que quisi√©ramos conocer es:

\[
Y(d=0) \text{ en } t = 1
\]

Es decir, **¬øqu√© habr√≠a pasado en el periodo \( t=1 \) si no hubi√©ramos tratado a nadie?** üí° El efecto causal real para una unidad ser√≠a:

\[
Y(d=1) - Y(d=0) \text{ en el mismo periodo } t=1
\]

Pero en el dise√±o antes-despu√©s usamos \( Y(d=0) \) del periodo anterior como sustituto de ese contrafactual. Entonces, el sesgo es:

\[
\text{Sesgo} = \underbrace{\mathbb{E}[Y(d=0) \text{ en } t = 1]}_{\text{contrafactual deseado}} - \underbrace{\mathbb{E}[Y(d=0) \text{ en } t = 0]}_{\text{valor observado como "antes"}}
\]

Este sesgo aparece si el resultado habr√≠a cambiado con el tiempo incluso sin el tratamiento.

üß™ Ejemplo ilustrativo

| A√±o  | Resultado observado | Tratamiento |
|------|---------------------|-------------|
|2019  | 6                   | 0 (antes)   |
|2020  | 9                   | 1 (despu√©s) |

- Estimador antes-despu√©s:  
  \[
  9 - 6 = 3
  \]
- Pero supongamos que, sin tratamiento, el resultado en 2020 habr√≠a sido 8  
  \[
  \Rightarrow Y(d=0) \text{ en } 2020 = 8
  \]
- Entonces el efecto causal verdadero es:  
  \[
  9 - 8 = 1
  \]
- Y el sesgo de selecci√≥n por tiempo es:
  \[
  3 - 1 = 2
  \]



El dise√±o antes-despu√©s asume que no habr√≠a cambio en el tiempo sin tratamiento. Este supuesto es **muy fuerte** y raramente cierto. Por eso, necesitamos un grupo de control que nos ayude a estimar \( \mathbb{E}[Y(d=0) \text{ en } t=1] \).

> En otras palabras, sin grupo de control **no podemos saber si el cambio fue por el tratamiento o por el tiempo**.

::: {.boxvideo .green title="üé• Videos recomendados:"}


Estos videos ayudan a reforzar visualmente los conceptos de **resultados potenciales**, **contrafactuales** y **sesgo en el dise√±o antes-despu√©s**.


<iframe width="100%" height="315" src="https://www.youtube.com/embed/ln5LBKiF8hE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<iframe width="100%" height="315" src="https://www.youtube.com/embed/iPBV3BlV7jk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

:::




---

::: {.boxnote }

üõ†Ô∏è üí¨ **PROMPT DE CHATGPT PARA REFLEXI√ìN PROFUNDA**

Est√°s escribiendo el apartado metodol√≥gico de un art√≠culo donde se implementa un programa de formaci√≥n t√©cnica para j√≥venes. Tu grupo de tratamiento incluye individuos que aplicaron y fueron aceptados. No tienes grupo de control expl√≠cito, pero tienes datos de resultados antes y despu√©s.

üìå Instrucciones:

Escribe a ChatGPT usando el siguiente mensaje:

Act√∫a como mi tutor metodol√≥gico. No quiero que simplemente expliques los conceptos, sino que me hagas preguntas, desaf√≠es mis supuestos, y me ayudes a razonar paso a paso como si estuvi√©ramos en una asesor√≠a.

üß™ Contexto: Quiero evaluar el efecto de un programa de formaci√≥n t√©cnica para j√≥venes. Tengo datos de ingreso mensual antes y despu√©s del programa, pero solo para quienes participaron. Estoy pensando en calcular:

    YÃÑ_despues - YÃÑ_antes

para reportar el efecto del programa.

Quiero que me ayudes a pensar cr√≠ticamente si esta estrategia identifica un efecto causal. Por favor:

1. Gu√≠ame para identificar cu√°l es el verdadero contrafactual que estoy ignorando.
2. Preg√∫ntame qu√© estoy asumiendo impl√≠citamente.
3. Expl√≥rame en qu√© condiciones este estimador funcionar√≠a bien.
4. Hazme reflexionar sobre qu√© sesgos podr√≠an surgir si los ingresos hubieran aumentado igual sin el programa.
5. Ll√©vame a conectar este ejemplo con los conceptos de Y(D=1), Y(D=0), ATT, ATE y el estimador na√Øve.

‚ö†Ô∏è Importante: no me lo des todo resuelto. Quiero que me vayas preguntando cosas, como har√≠a un buen profe. Quiero pensar, no solo escuchar. Hazlo interactivo.
:::



---


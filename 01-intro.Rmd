# An√°lisis de Secciones Transversales


## Motivaci√≥n para el an√°lisis causal {-}

En su breve y sugerente cuento Del rigor en la ciencia, Jorge Luis Borges relata la historia de un imperio en el que los cart√≥grafos llevaron su arte a un grado de perfecci√≥n tal, que terminaron por construir un mapa a escala 1:1, tan extenso y detallado como el mismo territorio que pretend√≠a representar. Con el tiempo, ese mapa fue olvidado, y sus ruinas todav√≠a se confunden con las del imperio.

> En aquel Imperio, el Arte de la Cartograf√≠a logr√≥ tal Perfecci√≥n que el mapa de una sola Provincia ocupaba toda una Ciudad, y el mapa del Imperio, toda una Provincia. Con el tiempo, estos Mapas Desmesurados no satisficieron y los Colegios de Cart√≥grafos levantaron un Mapa del Imperio, que ten√≠a el tama√±o del Imperio y coincid√≠a puntualmente con √©l. 
Menos Adictas al Estudio de la Cartograf√≠a, las Generaciones Siguientes entendieron que ese dilatado Mapa era In√∫til y no sin Impiedad lo entregaron a las Inclemencias del Sol y los Inviernos. En los desiertos del Oeste perduran despedazadas Ruinas del Mapa, habitadas por Animales y por Mendigos; en todo el Pa√≠s no hay otra reliquia de las Disciplinas Geogr√°ficas.
(Su√°rez Miranda, Viajes de Varones Prudentes, Libro Cuarto, Cap. XLV, L√©rida, 1658.)
FIN

Sabemos que no podemos capturar la complejidad del mundo en un solo modelo, pero aspiramos a representarlo con la suficiente precisi√≥n como para *entenderlo, intervenirlo y mejorarlo*. 

En este sentido, la econometr√≠a aplicada moderna se centra en la identificaci√≥n de relaciones causales. Estas relaciones son fundamentales para comprender c√≥mo funciona el mundo social, y para guiar decisiones informadas en el dise√±o de pol√≠ticas p√∫blicas.

Como explican Angrist y Pischke en su libro *Mostly Harmless Econometrics*:

> En primer lugar, creemos que la investigaci√≥n emp√≠rica es m√°s valiosa cuando utiliza datos para responder preguntas causales espec√≠ficas, *como si* se tratara de un ensayo cl√≠nico aleatorizado. Esta perspectiva moldea nuestro enfoque hacia la mayor√≠a de las preguntas de investigaci√≥n. En ausencia de un experimento real, buscamos comparaciones bien controladas y/o cuasiexperimentos naturales. Por supuesto, algunos dise√±os de investigaci√≥n cuasiexperimentales son m√°s convincentes que otros, pero .purple[los m√©todos econom√©tricos utilizados en estos estudios suelen ser bastante simples].
*Mostly Harmless Econometrics*, p. xii 


## Motivaci√≥n para el an√°lisis causal - ¬øPor qu√© es importante? {-}

¬øC√≥mo lo entendemos? Sin duda, la identficaci√≥n de relaciones causales es fundamental para entender c√≥mo funcionan las cosas. 
Enteder la consecuencia de una acci√≥n es crucial para entender el mundo que nos rodea. 

Aqu√≠ es donde la teor√≠a econ√≥mica juega un papel central: nos proporciona un marco para interpretar esas relaciones causales, al tiempo que orienta nuestra atenci√≥n hacia posibles mecanismos. Hacer econometr√≠a sin una teor√≠a econ√≥mica s√≥lida, sin una teor√≠a del cambio ni un esfuerzo por establecer mecanismos, es simplemente machacar datos. 

¬øC√≥mo lo intervenimos? Las relaciones causales nos permiten hacer predicciones sobre el impacto de intervenciones y pol√≠ticas. Por ejemplo, si sabemos que aumentar la educaci√≥n de los ni√±os mejora sus ingresos futuros, podemos dise√±ar pol√≠ticas educativas que maximicen ese efecto. Sin esta informaci√≥n, el dise√±o de pol√≠ticas se convierte en un ejercicio de ensayo y error, muchas veces costoso e ineficaz.

¬øC√≥mo mejoramos? El an√°lisis causal nos permite decir con cierta confianza qu√© cosas funcionan y bajo qu√© condiciones. Esto hace posible ajustar intervenciones para maximizar su impacto positivo. Por ejemplo, si sabemos que las transferencias monetarias condicionadas a la asistencia escolar aumentan la matr√≠cula, podemos adaptar ese dise√±o a otros contextos y poblaciones.

Por esta raz√≥n, ha ganado fuerza el enfoque de pol√≠ticas basadas en evidencia, que busca reemplazar la intuici√≥n, la tradici√≥n o la ideolog√≠a con an√°lisis rigurosos del mundo real. La microeconometr√≠a aplicada, con su atenci√≥n al detalle y su vocaci√≥n por la causalidad, es una herramienta clave en esa transici√≥n.

## Microeconometr√≠a y pol√≠tica p√∫blica {-}

La microeconometr√≠a aplicada es una herramienta fundamental para informar y mejorar la formulaci√≥n de pol√≠ticas p√∫blicas. Sus aportes se pueden clasificar en dos tipos:

**Efectos directos**
Asignaci√≥n eficiente de recursos: permite identificar qu√© intervenciones generan mayor impacto por peso invertido.
Mejora de la calidad, eficiencia y efectividad de programas e instituciones.
Focalizaci√≥n en resultados, m√°s all√° de insumos o procesos.
Identificaci√≥n de efectos no previstos, tanto positivos como negativos.
Fortalecimiento de la rendici√≥n de cuentas, mediante evaluaciones transparentes.
Efectos indirectos
Alimentar el debate p√∫blico con evidencia rigurosa que permita contrastar discursos, creencias y enfoques ideol√≥gicos.

## Microeconometr√≠a y teor√≠a econ√≥mica {-}

Adem√°s de su valor instrumental, la microeconometr√≠a contribuye activamente al desarrollo y evaluaci√≥n de la teor√≠a econ√≥mica. Entre sus aportes est√°n:

Generar mejor y m√°s informaci√≥n emp√≠rica, √∫til para contrastar modelos.
Reducir el ruido, eliminando hip√≥tesis o mecanismos irrelevantes.
Guiar el dise√±o de nuevas pol√≠ticas y experimentos, a partir de evidencia acumulada.
Promover discusiones m√°s transparentes sobre los supuestos, facilitando la cr√≠tica constructiva.
Estimular la retroalimentaci√≥n entre teor√≠a, datos y pol√≠tica.

### Ejemplo exitoso: Progresa (Oportunidades, M√©xico, 1990) {-}

Uno de los programas m√°s influyentes y mejor evaluados en Am√©rica Latina es Progresa, posteriormente conocido como Oportunidades y luego Prospera. Lanzado en M√©xico en 1997, su dise√±o se bas√≥ en evidencia emp√≠rica y principios de incentivos econ√≥micos.

#### üéØ Objetivo
Reducir la pobreza y mejorar el capital humano de los hogares m√°s vulnerables, especialmente en √°reas rurales. Para eso se brid√≥ a los hogares pobres
-un ingreso monetario de corto plazo
-incentivos para invertir en capital humano, especialmente en la educaci√≥n y salud infantil.
-Mecanismo_ Las transferencias estaban condicionadas a la asistencia escolar de los ni√±os y a visitas regulares a centros de salud.

#### Resultados iniciales (2001) {-}

Las evaluaciones experimentales y cuasiexperimentales del programa mostraron efectos significativos:

Shultz (2004): aumento promedio de 0.7 a√±os de escolaridad.
Gertler (2001): reducci√≥n del 23% en incidencia de enfermedades.
El programa mostr√≥ una focalizaci√≥n efectiva, beneficiando principalmente a los hogares m√°s pobres.


```{r, echo=FALSE, out.width="80%"}
knitr::include_graphics("img/pegado2.png")
knitr::include_graphics("img/pegado1.png")
```

## Formulando una buena pregunta causal {-}

M√°s all√° de definir la estrategia emp√≠rica, una investigaci√≥n de calidad comienza por formular preguntas bien planteadas. En el enfoque de Angrist y Pischke, el punto de partida consiste en identificar claramente cu√°l es la **relaci√≥n causal de inter√©s**. Esta pregunta gu√≠a no solo el an√°lisis, sino tambi√©n la forma en que interpretamos los resultados y dise√±amos la estrategia de identificaci√≥n. Si no es posible formular de forma precisa y concisa qu√© efecto queremos estimar, es probable que a√∫n no tengamos un verdadero proyecto de investigaci√≥n.

Esto no implica que las descripciones sean in√∫tiles: al contrario, los ejercicios descriptivos pueden ser valiosos e incluso necesarios. Pero en la econometr√≠a aplicada moderna, la causalidad ocupa un lugar central. Estimar relaciones causales permite poner a prueba directamente teor√≠as sobre c√≥mo funciona el mundo. Adem√°s, nos da acceso a contrafactuales, es decir, a estimaciones de qu√© habr√≠a pasado en ausencia de la intervenci√≥n o del tratamiento.

Para ilustrarlo, pensemos en preguntas cl√°sicas de la literatura:

- ¬øC√≥mo afecta un a√±o adicional de educaci√≥n al salario?  
- ¬øQu√© impacto tienen las instituciones democr√°ticas sobre el desarrollo econ√≥mico?  
- ¬øLos hogares pobres se benefician de la limpieza del medio ambiente?  
- ¬øLas leyes de control de armas reducen efectivamente la violencia?

Todas estas preguntas comparten una estructura causal: comparan una situaci√≥n observable con un contrafactual no observado. Y todas ellas podr√≠an, en principio, ser abordadas mediante un dise√±o experimental o cuasiexperimental adecuado.

## El experimento ideal {-}

Una herramienta √∫til para clarificar la l√≥gica causal de una investigaci√≥n es imaginar el **experimento ideal**: aquel que asignar√≠a aleatoriamente la causa de inter√©s ‚Äîeducaci√≥n, democracia, limpieza ambiental, leyes de armas‚Äî y luego comparar√≠a los resultados. Aunque muchas veces este experimento es hipot√©tico o inviable, su formulaci√≥n nos obliga a pensar con precisi√≥n: ¬øqu√© grupo recibir√≠a el tratamiento?, ¬øqu√© factores deber√≠amos mantener constantes?, ¬øc√≥mo medir√≠amos el efecto?

Cuando no es posible siquiera imaginar c√≥mo ser√≠a un experimento ideal, puede que estemos enfrentando lo que Angrist y Pischke denominan *preguntas fundamentalmente sin respuesta*. Por ejemplo, preguntas como ‚Äú¬øQu√© efecto tiene el g√©nero sobre las trayectorias laborales futuras?‚Äù o ‚Äú¬øQu√© rol juega la raza en los ingresos?‚Äù plantean desaf√≠os √©ticos, conceptuales y metodol√≥gicos dif√≠ciles de sortear.

En cambio, hay preguntas que, aunque complejas, s√≠ permiten imaginar un experimento. Por ejemplo, si quisi√©ramos estimar el efecto de comenzar la escuela a una edad m√°s avanzada, podr√≠amos imaginar un dise√±o en el que a algunos ni√±os se les asigna aleatoriamente empezar el primer grado a los seis a√±os, y a otros, a los siete. Luego, comparar√≠amos sus puntajes en pruebas estandarizadas al final del segundo grado. Aun as√≠, este dise√±o enfrenta un problema: los ni√±os que comienzan m√°s tarde son tambi√©n m√°s grandes, y la madurez puede explicar parte de las diferencias. Es decir, la edad y la duraci√≥n de la escolarizaci√≥n quedar√≠an entrelazadas. Incluso con un experimento ideal, algunos efectos son dif√≠ciles de aislar completamente.

## M√°s all√° del dise√±o: relevancia y aporte cient√≠fico {-}

Adem√°s de identificar con claridad la relaci√≥n causal y el experimento ideal, una buena investigaci√≥n causal tambi√©n debe justificar su importancia. Algunas preguntas clave que los investigadores deben hacerse al definir su objeto de estudio son: ¬øpor qu√© esta pregunta es relevante o interesante?, ¬øpor qu√© la literatura existente no ha resuelto a√∫n esta cuesti√≥n?, y ¬øc√≥mo contribuye mi trabajo a avanzar esa frontera?

Estas preguntas ayudan a ubicar el proyecto dentro de un marco m√°s amplio, que no solo busca estimar efectos, sino tambi√©n producir conocimiento √∫til, replicable y te√≥ricamente informado.

## üß∞ Checklist para una buena pregunta de investigaci√≥n causal {-}

```{r checklist-pregunta-causal, echo=FALSE, results='asis'}

library(tibble)
library(knitr)
library(kableExtra)

checklist <- tribble(
  ~Pregunta, ~Descripci√≥n,

  "¬øCu√°l es la relaci√≥n causal de inter√©s?",
  "Define con claridad qu√© variable act√∫a como causa y cu√°l como efecto.",

  "¬øPuedes describir el experimento ideal?",
  "Imagina c√≥mo se asignar√≠a aleatoriamente el tratamiento y c√≥mo medir√≠as el impacto.",

  "¬øPor qu√© esta pregunta es importante o interesante?",
  "Justifica la relevancia emp√≠rica, social o pol√≠tica del tema.",

  "¬øQu√© aporta respecto a la literatura existente?",
  "Identifica vac√≠os o limitaciones en estudios previos que tu trabajo busca superar.",

  "¬øQu√© mecanismos o teor√≠a motivan la hip√≥tesis causal?",
  "Aseg√∫rate de que haya una narrativa te√≥rica detr√°s de la relaci√≥n que estudias."
)

kbl(checklist, align = "l", booktabs = TRUE, caption = "Checklist para formular una buena pregunta de investigaci√≥n causal") %>%
  kable_styling(full_width = FALSE, position = "center", bootstrap_options = c("striped", "hover"))
```

## Conceptos Importantes {-}

### El Contrafactual {-}

> ¬øCu√°l habr√≠a sido el resultado para los participantes si **no** hubieran participado?

Este concepto es fundamental en la inferencia causal: cada persona tiene un resultado **observado** y un resultado **potencial no observado**. Este √∫ltimo es el contrafactual, es decir, lo que habr√≠a ocurrido si la persona hubiera estado en la otra condici√≥n (tratada o no tratada).

---

### Visualizando el Contrafactual {-}

Participante (Tratado)
```{r, ninas1, out.width = "20%", echo = FALSE, fig.align='left'}
knitr::include_graphics("img/ninas1.png")
```
$Y_1 \Rightarrow$ Resultado observado

No Participante (Control)
```{r, ninas1c, out.width = "20%", echo = FALSE, fig.align='right'}
knitr::include_graphics("img/ninas1.png")
```
$Y_0 \Rightarrow$ Resultado del contrafactual


### La Banda Sonora {-}

<iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/29gLVvN2oYO0p7zB40ts73?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>

---

### Resultados Potenciales {-}

Cada individuo tiene dos posibles resultados:

- $Y_i(D=0)$: resultado si **no** recibe el tratamiento
- $Y_i(D=1)$: resultado si **recibe** el tratamiento

Pero solo uno de ellos es observable. 

Por ejemplo, Carolina tiene una pierna rota. Tratamiento: $D=0$ No ir al hospital, $D=1$ Ir al hospital

- $Y_i(0)$: si no va al hospital, su pierna **no** se recupera
- $Y_i(1)$: si va al hospital, su pierna **no** se recupera

Ahora veamos a Camila quien tambi√©n tiene una pierna rota.

- $Y_i(0)$: si no va al hospital, su pierna **no** se recupera
- $Y_i(1)$: si va al hospital, su pierna **se recupera**

Por √∫ltimpo est√° M√≥nica  quien tambi√©n tiene una pierna rota.

- $Y_i(0)$: si no va al hospital, su pierna **se recupera**
- $Y_i(1)$: si va al hospital, su pierna **no** se recupera

Pregunta: ¬øa cual de las tres le conviene ir al hospital?

### Problema Fundamental de la Inferencia Causal {-}

Nunca podemos observar los **dos** resultados potenciales para un mismo individuo.

Esto genera un problema de datos faltantes: no sabemos cu√°l habr√≠a sido el resultado bajo la condici√≥n alternativa.

Solo observamos **uno** de los dos resultados potenciales. Formalmente:

$$
Y_i = \begin{cases}
  Y_i(0) & \text{si } D_i = 0 \\
  Y_i(1) & \text{si } D_i = 1 \\
\end{cases}
$$

donde $D_i$ indica si el individuo fue tratado ($D_i=1$) o no ($D_i=0$).


### Establecer Causalidad (Deseo de Clonaci√≥n) {-}

En el mundo ideal, podr√≠amos clonar personas para observar ambos resultados. Como esto no es posible, buscamos estimaciones mediante grupos de comparaci√≥n.

Tratado
```{r, ninas1a, out.width = "30%", echo = FALSE, fig.align='center'}
knitr::include_graphics("img/ninas1.png")
```
$Y_1 \Rightarrow$ Resultado observado


Clon en Control
```{r, ninas1b, out.width = "30%", echo = FALSE, fig.align='center'}
knitr::include_graphics("img/ninas1.png")
```
$Y_0 \Rightarrow$ Resultado contrafactual



[Ver en YouTube](https://youtu.be/iPBV3BlV7jk)

::: {.video-box}

### üé• Video recomendado: *Mastering Metrics*

<iframe width="100%" height="315" src="https://www.youtube.com/embed/iPBV3BlV7jk"
title="Mastering Metrics" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
allowfullscreen></iframe>

:::


## Ceteris Paribus {-}

> *Todos los dem√°s factores permanecen constantes.*

Este principio es la piedra angular del an√°lisis causal. Para estimar el efecto de una intervenci√≥n o tratamiento, debemos **aislar su impacto** de todas las dem√°s influencias posibles. Idealmente, quisi√©ramos comparar un mundo donde algo ocurre con uno donde no ocurre, manteniendo todo lo dem√°s constante.

## Establecer Causalidad {-}

- Nunca observamos ambos estados (tratado y no tratado) para el mismo individuo.
- ¬øQu√© soluciones existen?
  - Buscar una persona similar en todas las caracter√≠sticas relevantes.
  - Comparar promedios entre grupos tratados y no tratados (‚ö†Ô∏è puede haber *sesgo de selecci√≥n*).
  - Comparar antes y despu√©s en los mismos individuos (‚ö†Ô∏è puede haber *sesgo de maduraci√≥n*).


## Soluci√≥n 1: Buscar una persona similar {-}

### **Ceteris Paribus: ¬øPerfecto?**

**Tratada**  
```{r, out.width = "30%", echo = FALSE}
knitr::include_graphics("img/ninas1.png")
```

- $Y_1 \Rightarrow$ resultado observado



**Control**  
```{r, ninas3, out.width = "30%", echo = FALSE}
knitr::include_graphics("img/ninas3.png")
```

- $Y_0 \Rightarrow$ resultado del contrafactual


## Efecto Promedio del Tratamiento (ATE) {-}

El **Average Treatment Effect (ATE)** se define como:

\[
ATE = E[\tau] = E[Y_i(D=1) - Y_i(D=0)]
\]

Pero si no podemos observar los dos resultados potenciales para un mismo individuo, tampoco podemos calcular directamente este promedio.


---

## Soluci√≥n 2: Diferencia de Medias= Efecto Causal + Sesgo de Selecci√≥n

.pull-left[ **Tratados** 
```{r,  out.width = "30%", echo = F}
include_graphics("img/pegado3.png")
```
]

.pull-right[ **Controles** 
```{r,  out.width = "30%", echo = F}
include_graphics("img/pegado4.png")
```
]

## Soluci√≥n 2: Diferencia de Medias = Efecto Causal + Sesgo de Selecci√≥n {-}

Una alternativa com√∫n para estimar efectos causales es comparar los promedios de los grupos tratados y no tratados. Sin embargo, esta estrategia suele estar contaminada por **sesgo de selecci√≥n**: los grupos pueden diferir de manera sistem√°tica en variables que tambi√©n afectan el resultado.

.pull-left[
**Tratados**  
```{r, out.width = "30%", echo = FALSE}
knitr::include_graphics("img/pegado3.png")
```
]

.pull-right[
**Controles**  
```{r, out.width = "30%", echo = FALSE}
knitr::include_graphics("img/pegado4.png")
```
]

---

## Sesgo de Selecci√≥n {-}

El **sesgo de selecci√≥n** ocurre cuando las personas que reciben un tratamiento son inherentemente diferentes de aquellas que no lo reciben. Estas diferencias pueden estar asociadas con los resultados que estamos tratando de medir, incluso si no hubieran recibido el tratamiento.

Incluso con muestras grandes, este problema persiste. Por ejemplo, las personas suelen decidir participar en un programa cuando creen que obtendr√°n beneficios, lo que significa que sus resultados podr√≠an haber sido distintos desde el principio. En otras palabras, $E[Y_i(D=1) - Y_i(D=0)]$ puede ser mayor para quienes se auto-seleccionan.

---

## Soluci√≥n 3: Comparaciones Antes-Despu√©s = Efecto Causal + Efecto de Maduraci√≥n {-}

Otra estrategia simple consiste en comparar los resultados antes y despu√©s del tratamiento para los mismos individuos. Esta comparaci√≥n, sin embargo, **asume impl√≠citamente que no hay tendencia temporal** en la variable de inter√©s. Es decir, que cualquier cambio entre el "antes" y el "despu√©s" se debe exclusivamente al tratamiento.

Esta suposici√≥n es d√©bil, especialmente en contextos donde hay aprendizaje, adaptaci√≥n o efectos acumulativos en el tiempo.

---

## Comparaciones Prohibidas {-}

En el an√°lisis causal riguroso, debemos ser esc√©pticos de dos comparaciones muy comunes:

- **Tratados vs. Controles** sin aleatorizaci√≥n  
- **Pre-tratamiento vs. Post-tratamiento** sin grupo de comparaci√≥n  

Ambas requieren supuestos extremadamente fuertes ‚Äîen muchos casos imposibles de verificar o cumplir en la pr√°ctica‚Äî para identificar un efecto causal v√°lido.

---

## ¬øY Entonces? {-}

Dada la imposibilidad de observar directamente el contrafactual y los riesgos de comparaciones inadecuadas, ¬øc√≥mo podemos avanzar en el an√°lisis causal?

.pull-left[
```{r, simon11, out.width = "60%", echo = FALSE}
knitr::include_graphics("img/simon1.jpeg")
```

.fuente[Fuente: @banrepcultural]
]

---

## ¬øC√≥mo podemos estimar efectos causales? {-}

Hoy en d√≠a contamos con un conjunto robusto de herramientas para abordar esta pregunta. Estas t√©cnicas buscan crear **contrafactuales plausibles**, ya sea mediante dise√±o experimental o estrategias cuasi-experimentales.

**Entre las principales estrategias se encuentran:**

- **Experimentos aleatorizados**: donde los participantes son asignados aleatoriamente al tratamiento y al control.
- **M√©todos cuasi-experimentales**, como:
  - Diferencias en diferencias (DiD)
  - Emparejamiento (Matching)
  - Variables instrumentales (IV)
  - Regresi√≥n discontinua (RD)
  - Funci√≥n de control
  - Controles sint√©ticos
  - Causal Machine Learning

Cada uno de estos m√©todos tiene fortalezas y limitaciones, y ser√° explorado en detalle a lo largo del libro.





<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capitulo 9 Malos Controles en Stata | Cortes Transversales</title>
  <meta name="description" content="Capitulo 9 Malos Controles en Stata | Cortes Transversales" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Capitulo 9 Malos Controles en Stata | Cortes Transversales" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capitulo 9 Malos Controles en Stata | Cortes Transversales" />
  
  
  

<meta name="author" content="Ana MarÃ­a DÃ­az" />


<meta name="date" content="2025-09-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="test-de-tendencias-paralelas-y-malos-controles.html"/>
<link rel="next" href="malos-controles-mediador-m-vs-colisionador-c-dags.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">EconometrÃ­a Avanzada</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Programa</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#informaci%C3%B3n-general"><i class="fa fa-check"></i>InformaciÃ³n general</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#requisitos"><i class="fa fa-check"></i>Requisitos</a></li>
<li class="chapter" data-level="" data-path=""><a href="#evaluaci%C3%B3n"><i class="fa fa-check"></i>EvaluaciÃ³n</a></li>
<li class="chapter" data-level="" data-path=""><a href="#bibliograf%C3%ADa"><i class="fa fa-check"></i>BibliografÃ­a</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#libros-obligatorios"><i class="fa fa-check"></i>Libros Obligatorios</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#libros-recomendados"><i class="fa fa-check"></i>Libros Recomendados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#inclusi%C3%B3n"><i class="fa fa-check"></i>InclusiÃ³n</a></li>
<li class="chapter" data-level="" data-path=""><a href="#integridad-acad%C3%A9mica"><i class="fa fa-check"></i>Integridad AcadÃ©mica</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#programa-del-curso"><i class="fa fa-check"></i>Programa del Curso</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="10-BadControlsStata.html"><a href="#an%C3%A1lisis-de-secciones-transversales"><i class="fa fa-check"></i><b>1</b> AnÃ¡lisis de Secciones Transversales</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#motivaci%C3%B3n-para-el-an%C3%A1lisis-causal"><i class="fa fa-check"></i>MotivaciÃ³n para el anÃ¡lisis causal</a></li>
<li class="chapter" data-level="" data-path=""><a href="#motivaci%C3%B3n-para-el-an%C3%A1lisis-causal---por-qu%C3%A9-es-importante"><i class="fa fa-check"></i>MotivaciÃ³n para el anÃ¡lisis causal - Â¿Por quÃ© es importante?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#microeconometr%C3%ADa-y-pol%C3%ADtica-p%C3%BAblica"><i class="fa fa-check"></i>MicroeconometrÃ­a y polÃ­tica pÃºblica</a></li>
<li class="chapter" data-level="" data-path=""><a href="#microeconometr%C3%ADa-y-teor%C3%ADa-econ%C3%B3mica"><i class="fa fa-check"></i>MicroeconometrÃ­a y teorÃ­a econÃ³mica</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#ejemplo-exitoso-progresa-oportunidades-m%C3%A9xico-1990"><i class="fa fa-check"></i>Ejemplo exitoso: Progresa (Oportunidades, MÃ©xico, 1990)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html"><i class="fa fa-check"></i>Formulando una buena pregunta causal</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#el-experimento-ideal"><i class="fa fa-check"></i>El experimento ideal</a></li>
<li class="chapter" data-level="" data-path=""><a href="#m%C3%A1s-all%C3%A1-del-dise%C3%B1o-relevancia-y-aporte-cient%C3%ADfico"><i class="fa fa-check"></i>MÃ¡s allÃ¡ del diseÃ±o: relevancia y aporte cientÃ­fico</a></li>
<li class="chapter" data-level="" data-path=""><a href="#checklist-para-una-buena-pregunta-de-investigaci%C3%B3n-causal"><i class="fa fa-check"></i>ğŸ§° Checklist para una buena pregunta de investigaciÃ³n causal</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#conceptos-importantes"><i class="fa fa-check"></i>Conceptos Importantes</a>
<ul>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#el-contrafactual"><i class="fa fa-check"></i>El Contrafactual</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#visualizando-el-contrafactual"><i class="fa fa-check"></i>Visualizando el Contrafactual</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#la-banda-sonora"><i class="fa fa-check"></i>La Banda Sonora</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#resultados-potenciales"><i class="fa fa-check"></i>Resultados Potenciales</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#problema-fundamental-de-la-inferencia-causal"><i class="fa fa-check"></i>Problema Fundamental de la Inferencia Causal</a></li>
<li class="chapter" data-level="" data-path=""><a href="#establecer-causalidad-deseo-de-clonaci%C3%B3n"><i class="fa fa-check"></i>Establecer Causalidad (Deseo de ClonaciÃ³n)</a></li>
<li class="chapter" data-level="1.0.1" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#video-recomendado-mastering-metrics"><i class="fa fa-check"></i><b>1.0.1</b> ğŸ¥ Video recomendado: <em>Mastering Metrics</em></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#ceteris-paribus"><i class="fa fa-check"></i>Ceteris Paribus</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#establecer-causalidad"><i class="fa fa-check"></i>Establecer Causalidad</a></li>
<li class="chapter" data-level="" data-path=""><a href="#soluci%C3%B3n-1-buscar-una-persona-similar"><i class="fa fa-check"></i>SoluciÃ³n 1: Buscar una persona similar</a>
<ul>
<li class="chapter" data-level="1.0.2" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#ceteris-paribus-perfecto"><i class="fa fa-check"></i><b>1.0.2</b> <strong>Ceteris Paribus: Â¿Perfecto?</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#efecto-promedio-del-tratamiento-ate"><i class="fa fa-check"></i>Efecto Promedio del Tratamiento (ATE)</a></li>
<li class="chapter" data-level="1.1" data-path="10-BadControlsStata.html"><a href="#soluci%C3%B3n-2-diferencia-de-medias-efecto-causal-sesgo-de-selecci%C3%B3n"><i class="fa fa-check"></i><b>1.1</b> SoluciÃ³n 2: Diferencia de Medias= Efecto Causal + Sesgo de SelecciÃ³n</a></li>
<li class="chapter" data-level="" data-path=""><a href="#soluci%C3%B3n-2-diferencia-de-medias-efecto-causal-sesgo-de-selecci%C3%B3n-1"><i class="fa fa-check"></i>SoluciÃ³n 2: Diferencia de Medias = Efecto Causal + Sesgo de SelecciÃ³n</a></li>
<li class="chapter" data-level="" data-path=""><a href="#sesgo-de-selecci%C3%B3n"><i class="fa fa-check"></i>Sesgo de SelecciÃ³n</a></li>
<li class="chapter" data-level="" data-path=""><a href="#soluci%C3%B3n-3-comparaciones-antes-despu%C3%A9s-efecto-causal-efecto-de-maduraci%C3%B3n"><i class="fa fa-check"></i>SoluciÃ³n 3: Comparaciones Antes-DespuÃ©s = Efecto Causal + Efecto de MaduraciÃ³n</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#comparaciones-prohibidas"><i class="fa fa-check"></i>Comparaciones Prohibidas</a></li>
<li class="chapter" data-level="" data-path="anÃ¡lisis-de-secciones-transversales.html"><a href="anÃ¡lisis-de-secciones-transversales.html#y-entonces"><i class="fa fa-check"></i>Â¿Y Entonces?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#c%C3%B3mo-podemos-estimar-efectos-causales"><i class="fa fa-check"></i>Â¿CÃ³mo podemos estimar efectos causales?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html"><i class="fa fa-check"></i><b>2</b> Stata para Principiantes</a>
<ul>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#macros-en-stata"><i class="fa fa-check"></i>Macros en Stata</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#macro-local-definici%C3%B3n-y-expansi%C3%B3n"><i class="fa fa-check"></i>Macro local: definiciÃ³n y expansiÃ³n</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#evaluar-expresiones-dentro-de-macros"><i class="fa fa-check"></i>Evaluar expresiones dentro de macros</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#macro-con-texto"><i class="fa fa-check"></i>Macro con texto</a></li>
<li class="chapter" data-level="" data-path=""><a href="#macro-global-uso-y-precauci%C3%B3n"><i class="fa fa-check"></i>Macro global: uso y precauciÃ³n</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#scalar-vs.-macro"><i class="fa fa-check"></i>Scalar vs.Â Macro</a></li>
<li class="chapter" data-level="" data-path=""><a href="#buenas-pr%C3%A1cticas"><i class="fa fa-check"></i>Buenas prÃ¡cticas</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#ejercicio-recomendado"><i class="fa fa-check"></i>ğŸ§© Ejercicio recomendado</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#loops-en-stata"><i class="fa fa-check"></i>Loops en Stata</a>
<ul>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#loop-con-foreach"><i class="fa fa-check"></i>Loop con <code>foreach</code></a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#loop-con-forvalues"><i class="fa fa-check"></i>Loop con <code>forvalues</code></a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#loop-con-while"><i class="fa fa-check"></i>Loop con <code>while</code></a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#ejercicios-recomendados"><i class="fa fa-check"></i>ğŸ§  Ejercicios recomendados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#programas-definidos-por-el-usuario"><i class="fa fa-check"></i>Programas definidos por el usuario</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#estructura-b%C3%A1sica"><i class="fa fa-check"></i>Estructura bÃ¡sica</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#programas-con-argumentos"><i class="fa fa-check"></i>Programas con argumentos</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#tu-programa-original-mejorado-mysum"><i class="fa fa-check"></i>Tu programa original mejorado: <code>mysum</code></a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#notas-importantes"><i class="fa fa-check"></i>Notas importantes</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#ejercicios-recomendados-1"><i class="fa fa-check"></i>ğŸ”§ Ejercicios recomendados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#almacenamiento-de-resultados-con-postfile-y-loops"><i class="fa fa-check"></i>Almacenamiento de resultados con <code>postfile</code> y loops</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#qu%C3%A9-hace-postfile"><i class="fa fa-check"></i>Â¿QuÃ© hace <code>postfile</code>?</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#paso-a-paso-guardar-medias-con-summarize"><i class="fa fa-check"></i>Paso a paso: guardar medias con <code>summarize</code></a></li>
<li class="chapter" data-level="" data-path=""><a href="#qu%C3%A9-hicimos-aqu%C3%AD"><i class="fa fa-check"></i>Â¿QuÃ© hicimos aquÃ­?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#buenas-pr%C3%A1cticas-1"><i class="fa fa-check"></i>Buenas prÃ¡cticas</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#ejercicios-con-postfile"><i class="fa fa-check"></i>ğŸ“¦ Ejercicios con <code>postfile</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#resumen-y-buenas-pr%C3%A1cticas"><i class="fa fa-check"></i>Resumen y buenas prÃ¡cticas</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#buenas-pr%C3%A1cticas-al-programar-en-stata"><i class="fa fa-check"></i>Buenas prÃ¡cticas al programar en Stata</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#ejercicio-de-repaso"><i class="fa fa-check"></i>ğŸ§  Ejercicio de repaso</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#y-si-quiero-hacerlo-en-r-o-python"><i class="fa fa-check"></i>Â¿Y si quiero hacerlo en R o Python?</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#asignar-valores-y-mostrar-texto"><i class="fa fa-check"></i>1. Asignar valores y mostrar texto</a></li>
<li class="chapter" data-level="" data-path=""><a href="#operaciones-b%C3%A1sicas"><i class="fa fa-check"></i>2. Operaciones bÃ¡sicas</a></li>
<li class="chapter" data-level="" data-path=""><a href="#loops-b%C3%A1sicos"><i class="fa fa-check"></i>3. Loops bÃ¡sicos</a>
<ul>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#iterar-sobre-lista-de-variables"><i class="fa fa-check"></i>Iterar sobre lista de variables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#crear-funcionesprogramas"><i class="fa fa-check"></i>4. Crear funciones/programas</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#guardar-resultados-dentro-de-un-loop"><i class="fa fa-check"></i>5. Guardar resultados dentro de un loop</a></li>
<li class="chapter" data-level="" data-path="stata-para-principiantes.html"><a href="stata-para-principiantes.html#descarga-los-documentos"><i class="fa fa-check"></i>DESCARGA LOS DOCUMENTOS</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="10-BadControlsStata.html"><a href="#definici%C3%B3n-de-estimadores-resultados-potenciales-e-introducci%C3%B3n-al-sesgo-de-selecci%C3%B3n"><i class="fa fa-check"></i><b>3</b> ğŸ“˜ DefiniciÃ³n de estimadores, resultados potenciales e introducciÃ³n al sesgo de selecciÃ³n</a>
<ul>
<li class="chapter" data-level="" data-path="definiciÃ³n-de-estimadores-resultados-potenciales-e-introducciÃ³n-al-sesgo-de-selecciÃ³n.html"><a href="definiciÃ³n-de-estimadores-resultados-potenciales-e-introducciÃ³n-al-sesgo-de-selecciÃ³n.html"><i class="fa fa-check"></i>ğŸ”¹ Resultados potenciales</a></li>
<li class="chapter" data-level="" data-path=""><a href="#par%C3%A1metros-de-inter%C3%A9s"><i class="fa fa-check"></i>ğŸ”¹ ParÃ¡metros de interÃ©s</a></li>
<li class="chapter" data-level="" data-path=""><a href="#por-qu%C3%A9-no-es-suficiente-el-estimador-na%C3%AFve"><i class="fa fa-check"></i>ğŸ”¹ Â¿Por quÃ© no es suficiente el estimador naÃ¯ve?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#sesgo-de-selecci%C3%B3n-1"><i class="fa fa-check"></i>ğŸ”¹ Sesgo de selecciÃ³n</a></li>
<li class="chapter" data-level="" data-path=""><a href="#ejercicio-en-clase-resultados-potenciales-y-sesgo-de-selecci%C3%B3n"><i class="fa fa-check"></i>ğŸ”¢ Ejercicio en clase: Resultados potenciales y sesgo de selecciÃ³n</a></li>
<li class="chapter" data-level="" data-path=""><a href="#sesgo-en-comparaciones-antes-despu%C3%A9s-sin-grupo-de-control"><i class="fa fa-check"></i>ğŸ”¹ Sesgo en comparaciones antes-despuÃ©s (sin grupo de control)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="estimadores-causales-en-secciones-transversales.html"><a href="estimadores-causales-en-secciones-transversales.html"><i class="fa fa-check"></i><b>4</b> Estimadores Causales en Secciones Transversales</a>
<ul>
<li class="chapter" data-level="" data-path="estimadores-causales-en-secciones-transversales.html"><a href="estimadores-causales-en-secciones-transversales.html#lecturas-obligatorias"><i class="fa fa-check"></i>ğŸ“š Lecturas obligatorias</a></li>
<li class="chapter" data-level="" data-path="estimadores-causales-en-secciones-transversales.html"><a href="estimadores-causales-en-secciones-transversales.html#descargas"><i class="fa fa-check"></i>ğŸ“ Descargas</a></li>
<li class="chapter" data-level="" data-path="estimadores-causales-en-secciones-transversales.html"><a href="estimadores-causales-en-secciones-transversales.html#descargas-1"><i class="fa fa-check"></i>ğŸ“ Descargas</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="10-BadControlsStata.html"><a href="#por-qu%C3%A9-la-asignaci%C3%B3n-aleatoria-elimina-el-sesgo"><i class="fa fa-check"></i><b>5</b> Â¿Por quÃ© la asignaciÃ³n aleatoria elimina el sesgo?</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#qu%C3%A9-hace-la-aleatorizaci%C3%B3n"><i class="fa fa-check"></i>Â¿QuÃ© hace la aleatorizaciÃ³n?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#densidad-de-la-motivaci%C3%B3n-por-grupo"><i class="fa fa-check"></i>Densidad de la motivaciÃ³n por grupo</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="experimentos-controlados-receta.html"><a href="experimentos-controlados-receta.html"><i class="fa fa-check"></i><b>6</b> Experimentos Controlados RECETA</a>
<ul>
<li class="chapter" data-level="" data-path="experimentos-controlados-receta.html"><a href="experimentos-controlados-receta.html#paso-a-paso-para-un-rct"><i class="fa fa-check"></i>Paso a Paso para un RCT</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#paso-1-dise%C3%B1ar-el-experimento"><i class="fa fa-check"></i>PASO 1) DiseÃ±ar el experimento</a></li>
<li class="chapter" data-level="" data-path=""><a href="#paso-2-aleatorizar-la-asignaci%C3%B3n-stata"><i class="fa fa-check"></i>Paso 2) Aleatorizar la asignaciÃ³n (Stata)</a></li>
<li class="chapter" data-level="" data-path="experimentos-controlados-receta.html"><a href="experimentos-controlados-receta.html#paso-3-verificar-el-balance-de-covariables"><i class="fa fa-check"></i>PASO 3) Verificar el balance de covariables</a></li>
<li class="chapter" data-level="" data-path="experimentos-controlados-receta.html"><a href="experimentos-controlados-receta.html#paso-4-estimar-el-efecto-del-tratamiento"><i class="fa fa-check"></i>PASO 4) Estimar el efecto del tratamiento</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#inferencia-estad%C3%ADstica"><i class="fa fa-check"></i>Inferencia estadÃ­stica</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#asignaci%C3%B3n-a-nivel-individual-dos-muestras-independientes"><i class="fa fa-check"></i>AsignaciÃ³n a nivel individual (dos muestras independientes)</a></li>
<li class="chapter" data-level="" data-path="experimentos-controlados-receta.html"><a href="experimentos-controlados-receta.html#pruebas"><i class="fa fa-check"></i>Pruebas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#cu%C3%A1ndo-incluir-controles"><i class="fa fa-check"></i>Â¿CuÃ¡ndo incluir controles?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#efectos-heterog%C3%A9neos-het"><i class="fa fa-check"></i>Efectos heterogÃ©neos (HET)</a></li>
<li class="chapter" data-level="" data-path="experimentos-controlados-receta.html"><a href="experimentos-controlados-receta.html#descarga-los-documentos-1"><i class="fa fa-check"></i>DESCARGA LOS DOCUMENTOS</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="10-BadControlsStata.html"><a href="#c%C3%A1lculos-de-poder-estad%C3%ADstico-en-stata"><i class="fa fa-check"></i><b>7</b> CÃ¡lculos de Poder EstadÃ­stico en Stata</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#introducci%C3%B3n"><i class="fa fa-check"></i>IntroducciÃ³n</a></li>
<li class="chapter" data-level="" data-path="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html"><a href="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html"><i class="fa fa-check"></i>Sin controles</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#tama%C3%B1o-de-muestra-para-un-efecto-dado"><i class="fa fa-check"></i>TamaÃ±o de muestra para un efecto dado</a></li>
<li class="chapter" data-level="" data-path=""><a href="#efecto-m%C3%ADnimo-detectable-mde-para-un-n-dado"><i class="fa fa-check"></i>Efecto mÃ­nimo detectable (MDE) para un N dado</a></li>
<li class="chapter" data-level="" data-path="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html"><a href="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html#mde-para-un-n-dado-con-variable-binaria"><i class="fa fa-check"></i>MDE para un N dado con variable binaria</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html"><a href="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html#incorporando-controles"><i class="fa fa-check"></i>Incorporando controles</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#tama%C3%B1o-de-muestra-para-un-efecto-dado-con-covariables"><i class="fa fa-check"></i>TamaÃ±o de muestra para un efecto dado con covariables</a></li>
<li class="chapter" data-level="" data-path="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html"><a href="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html#mde-para-un-n-dado-con-covariables"><i class="fa fa-check"></i>MDE para un N dado con covariables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#tama%C3%B1o-de-muestra-con-cumplimiento-parcial-take-up"><i class="fa fa-check"></i>TamaÃ±o de muestra con cumplimiento parcial (take-up)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#dise%C3%B1os-por-conglomerados-o-grupos"><i class="fa fa-check"></i>DiseÃ±os por conglomerados o grupos</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#n%C3%BAmero-de-cl%C3%BAsteres-para-un-efecto-y-tama%C3%B1o-de-cl%C3%BAster-dados"><i class="fa fa-check"></i>NÃºmero de clÃºsteres para un efecto y tamaÃ±o de clÃºster dados</a></li>
<li class="chapter" data-level="" data-path=""><a href="#tama%C3%B1o-de-cl%C3%BAster-para-un-n%C3%BAmero-dado-de-cl%C3%BAsteres"><i class="fa fa-check"></i>TamaÃ±o de clÃºster para un nÃºmero dado de clÃºsteres</a></li>
<li class="chapter" data-level="" data-path=""><a href="#mde-para-un-tama%C3%B1o-de-cl%C3%BAster-y-n%C3%BAmero-de-cl%C3%BAsteres-dados"><i class="fa fa-check"></i>MDE para un tamaÃ±o de clÃºster y nÃºmero de clÃºsteres dados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#estad%C3%ADsticas-descriptivas"><i class="fa fa-check"></i>EstadÃ­sticas descriptivas</a>
<ul>
<li class="chapter" data-level="" data-path="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html"><a href="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html#promedios-por-periodo-y-grupo"><i class="fa fa-check"></i>Promedios por periodo y grupo</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#comparaci%C3%B3n-de-medias"><i class="fa fa-check"></i>ComparaciÃ³n de medias</a></li>
<li class="chapter" data-level="" data-path="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html"><a href="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html#estimador-did-paso-a-paso"><i class="fa fa-check"></i>Estimador DID paso a paso</a></li>
<li class="chapter" data-level="" data-path="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html"><a href="cÃ¡lculos-de-poder-estadÃ­stico-en-stata.html#usando-el-comando-diff"><i class="fa fa-check"></i>Usando el comando <code>diff</code></a></li>
<li class="chapter" data-level="" data-path=""><a href="#implementaci%C3%B3n-con-regresiones"><i class="fa fa-check"></i>ImplementaciÃ³n con regresiones</a></li>
<li class="chapter" data-level="" data-path=""><a href="#extensi%C3%B3n-con-panel"><i class="fa fa-check"></i>ExtensiÃ³n con panel</a></li>
<li class="chapter" data-level="" data-path=""><a href="#interpretaci%C3%B3n"><i class="fa fa-check"></i>InterpretaciÃ³n</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html"><i class="fa fa-check"></i><b>8</b> Test de Tendencias Paralelas y Malos Controles</a>
<ul>
<li class="chapter" data-level="" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html#el-supuesto-de-tendencias-paralelas"><i class="fa fa-check"></i>El supuesto de Tendencias Paralelas</a></li>
<li class="chapter" data-level="" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html#resultados-potenciales-2"><i class="fa fa-check"></i>Resultados Potenciales</a></li>
<li class="chapter" data-level="" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html#primeras-diferencias-y-did"><i class="fa fa-check"></i>Primeras Diferencias y DID</a></li>
<li class="chapter" data-level="" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html#controles-en-did"><i class="fa fa-check"></i>Controles en DID</a>
<ul>
<li class="chapter" data-level="" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html#buenos-controles"><i class="fa fa-check"></i>Buenos controles</a></li>
<li class="chapter" data-level="" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html#malos-controles"><i class="fa fa-check"></i>Malos controles</a></li>
<li class="chapter" data-level="" data-path=""><a href="#implicaciones-pr%C3%A1cticas"><i class="fa fa-check"></i>Implicaciones prÃ¡cticas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html#supuestos-y-consistencia"><i class="fa fa-check"></i>Supuestos y Consistencia</a></li>
<li class="chapter" data-level="" data-path=""><a href="#sesgo-de-agrupaci%C3%B3n"><i class="fa fa-check"></i>Sesgo de AgrupaciÃ³n</a></li>
<li class="chapter" data-level="" data-path="test-de-tendencias-paralelas-y-malos-controles.html"><a href="test-de-tendencias-paralelas-y-malos-controles.html#moraleja-final"><i class="fa fa-check"></i>Moraleja Final</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="malos-controles-en-stata.html"><a href="malos-controles-en-stata.html"><i class="fa fa-check"></i><b>9</b> Malos Controles en Stata</a>
<ul>
<li class="chapter" data-level="9.1" data-path="malos-controles-en-stata.html"><a href="malos-controles-en-stata.html#mediador-post-tratamiento"><i class="fa fa-check"></i><b>9.1</b> Mediador (post-tratamiento)</a>
<ul>
<li class="chapter" data-level="" data-path="malos-controles-en-stata.html"><a href="malos-controles-en-stata.html#mediador-d-rightarrow-m-rightarrow-y"><i class="fa fa-check"></i>Mediador: <span class="math inline">\(D \rightarrow M \rightarrow Y\)</span></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="malos-controles-en-stata.html"><a href="malos-controles-en-stata.html#colisionador"><i class="fa fa-check"></i>Colisionador</a></li>
<li class="chapter" data-level="9.2" data-path="10-BadControlsStata.html"><a href="#gr%C3%A1ficos-de-apoyo"><i class="fa fa-check"></i><b>9.2</b> GrÃ¡ficos de apoyo</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="malos-controles-en-stata.html"><a href="malos-controles-en-stata.html#coefplot-del-mediador"><i class="fa fa-check"></i><b>9.2.1</b> Coefplot del mediador</a></li>
<li class="chapter" data-level="9.2.2" data-path="malos-controles-en-stata.html"><a href="malos-controles-en-stata.html#histogramas-monte-carlo"><i class="fa fa-check"></i><b>9.2.2</b> Histogramas Monte Carlo</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="10-BadControlsStata.html"><a href="#resumen-pr%C3%A1ctico"><i class="fa fa-check"></i><b>9.3</b> Resumen prÃ¡ctico</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="malos-controles-mediador-m-vs-colisionador-c-dags.html"><a href="malos-controles-mediador-m-vs-colisionador-c-dags.html"><i class="fa fa-check"></i>Malos controles: <strong>Mediador (M)</strong> vs <strong>Colisionador (C)</strong> â€” DAGs</a>
<ul>
<li class="chapter" data-level="9.4" data-path="malos-controles-mediador-m-vs-colisionador-c-dags.html"><a href="malos-controles-mediador-m-vs-colisionador-c-dags.html#caso-b-f-descendiente-de-colisionador-d-y-u-y-y-f"><i class="fa fa-check"></i><b>9.4</b> Caso B â€” <strong>F descendiente de colisionador</strong> (<code>D â†’ Y â† U</code> y <code>Y â†’ F</code>)</a></li>
<li class="chapter" data-level="9.5" data-path="malos-controles-mediador-m-vs-colisionador-c-dags.html"><a href="malos-controles-mediador-m-vs-colisionador-c-dags.html#caso-c-f-post-tratamiento-mediador-d-f-y"><i class="fa fa-check"></i><b>9.5</b> Caso C â€” <strong>F post-tratamiento (mediador)</strong> (<code>D â†’ F â†’ Y</code>)</a></li>
<li class="chapter" data-level="9.6" data-path="10-BadControlsStata.html"><a href="#resumen-pedag%C3%B3gico"><i class="fa fa-check"></i><b>9.6</b> Resumen pedagÃ³gico</a></li>
<li class="chapter" data-level="" data-path="malos-controles-mediador-m-vs-colisionador-c-dags.html"><a href="malos-controles-mediador-m-vs-colisionador-c-dags.html#descarga-los-documentos-2"><i class="fa fa-check"></i>DESCARGA LOS DOCUMENTOS</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="problemas-de-twfe-y-alternativas-modernas-en-did.html"><a href="problemas-de-twfe-y-alternativas-modernas-en-did.html"><i class="fa fa-check"></i><b>10</b> Problemas de TWFE y alternativas modernas en DiD</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#contexto-r%C3%A1pido"><i class="fa fa-check"></i>Contexto rÃ¡pido</a></li>
<li class="chapter" data-level="" data-path=""><a href="#modelo-b%C3%A1sico-22-did"><i class="fa fa-check"></i>Modelo bÃ¡sico 2Ã—2 DiD</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#explicaci%C3%B3n-did%C3%A1ctica"><i class="fa fa-check"></i>ExplicaciÃ³n didÃ¡ctica</a></li>
<li class="chapter" data-level="10.0.1" data-path="10-BadControlsStata.html"><a href="#c%C3%B3digo-copiarpegar"><i class="fa fa-check"></i><b>10.0.1</b> CÃ³digo (copiar/pegar)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#panel-largo-con-2-unidades-y-tratamiento-desde-un-a%C3%B1o-en-adelante"><i class="fa fa-check"></i>Panel largo con 2 unidades y tratamiento â€œdesde un aÃ±o en adelanteâ€</a></li>
<li class="chapter" data-level="" data-path=""><a href="#m%C3%A1s-unidades-mismo-a%C3%B1o-de-inicio-efectos-heterog%C3%A9neos"><i class="fa fa-check"></i>MÃ¡s unidades, <strong>mismo</strong> aÃ±o de inicio, <strong>efectos heterogÃ©neos</strong></a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#versi%C3%B3n-donde-y-refleja-solo-el-tama%C3%B1o-del-efecto-por-tratado"><i class="fa fa-check"></i>VersiÃ³n donde <code>Y</code> refleja solo el tamaÃ±o del efecto por tratado</a></li>
<li class="chapter" data-level="" data-path=""><a href="#b-versi%C3%B3n-con-y-id-t-efecto_heterog%C3%A9neo"><i class="fa fa-check"></i>3B) VersiÃ³n con <code>Y = id + t + efecto_heterogÃ©neo</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#m%C3%A1s-unidades-distinto-tiempo-de-tratamiento-staggered-y-distinto-efecto"><i class="fa fa-check"></i>MÃ¡s unidades, <strong>distinto tiempo de tratamiento</strong> (staggered) y <strong>distinto efecto</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#descomposici%C3%B3n-de-bacon-y-efecto-real-en-did-con-adopci%C3%B3n-escalonada"><i class="fa fa-check"></i>DescomposiciÃ³n de Bacon y â€œefecto realâ€ en DiD con adopciÃ³n escalonada</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#qu%C3%A9-es-la-descomposici%C3%B3n-de-bacon-y-por-qu%C3%A9-importa"><i class="fa fa-check"></i>Â¿QuÃ© es la descomposiciÃ³n de Bacon y por quÃ© importa?</a></li>
<li class="chapter" data-level="" data-path="descomposiciÃ³n-de-bacon-y-efecto-real-en-did-con-adopciÃ³n-escalonada.html"><a href="descomposiciÃ³n-de-bacon-y-efecto-real-en-did-con-adopciÃ³n-escalonada.html"><i class="fa fa-check"></i>Las tres familias de comparaciones 2Ã—2</a></li>
<li class="chapter" data-level="" data-path=""><a href="#cu%C3%A1l-es-el-efecto-real-que-queremos-reportar"><i class="fa fa-check"></i>Â¿CuÃ¡l es â€œel efecto realâ€ que queremos reportar?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#por-qu%C3%A9-twfe-puede-fallar-con-heterogeneidad"><i class="fa fa-check"></i>Â¿Por quÃ© TWFE puede fallar con heterogeneidad?</a></li>
<li class="chapter" data-level="" data-path="descomposiciÃ³n-de-bacon-y-efecto-real-en-did-con-adopciÃ³n-escalonada.html"><a href="descomposiciÃ³n-de-bacon-y-efecto-real-en-did-con-adopciÃ³n-escalonada.html#mini-ejemplos-para-fijar-ideas"><i class="fa fa-check"></i>Mini-ejemplos para fijar ideas</a>
<ul>
<li class="chapter" data-level="10.0.2" data-path="descomposiciÃ³n-de-bacon-y-efecto-real-en-did-con-adopciÃ³n-escalonada.html"><a href="descomposiciÃ³n-de-bacon-y-efecto-real-en-did-con-adopciÃ³n-escalonada.html#caso-3-tu-ejemplo-con-tres-unidades-mismo-inicio-y-efecto-por-cohorte"><i class="fa fa-check"></i><b>10.0.2</b> Caso 3 (tu ejemplo con tres unidades, mismo inicio y efecto por cohorte)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#caso-con-adopci%C3%B3n-escalonada-y-efectos-din%C3%A1micos"><i class="fa fa-check"></i>Caso con <strong>adopciÃ³n escalonada</strong> y <strong>efectos dinÃ¡micos</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#c%C3%B3mo-leer-la-salida-intuici%C3%B3n"><i class="fa fa-check"></i>CÃ³mo leer la salida (intuiciÃ³n)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#buenas-pr%C3%A1cticas-en-una-lista-corta"><i class="fa fa-check"></i>Buenas prÃ¡cticas (en una lista corta)</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="10-BadControlsStata.html"><a href="#c%C3%B3mo-interpretar-la-salida-de-bacondecomp"><i class="fa fa-check"></i><b>11</b> Â¿CÃ³mo interpretar la salida de <code>bacondecomp</code>?</a>
<ul>
<li class="chapter" data-level="11.1" data-path="10-BadControlsStata.html"><a href="#qu%C3%A9-significa-cada-fila"><i class="fa fa-check"></i><b>11.1</b> 1) Â¿QuÃ© significa cada fila?</a></li>
<li class="chapter" data-level="11.2" data-path="10-BadControlsStata.html"><a href="#cuadra-el-promedio-ponderado-con-el-%CE%B2-de-twfe"><i class="fa fa-check"></i><b>11.2</b> 2) Â¿Cuadra el promedio ponderado con el Î² de TWFE?</a></li>
<li class="chapter" data-level="11.3" data-path="10-BadControlsStata.html"><a href="#por-qu%C3%A9-este-%CE%B2-puede-no-ser-el-efecto-real-promedio"><i class="fa fa-check"></i><b>11.3</b> 3) Â¿Por quÃ© este Î²Ì‚ puede <strong>no</strong> ser â€œel efecto real promedioâ€?</a></li>
<li class="chapter" data-level="11.4" data-path="10-BadControlsStata.html"><a href="#c%C3%B3mo-usar-esta-descomposici%C3%B3n-en-la-pr%C3%A1ctica"><i class="fa fa-check"></i><b>11.4</b> 4) Â¿CÃ³mo usar esta descomposiciÃ³n en la prÃ¡ctica?</a></li>
<li class="chapter" data-level="11.5" data-path="10-BadControlsStata.html"><a href="#resumen-en-una-l%C3%ADnea"><i class="fa fa-check"></i><b>11.5</b> 5) Resumen en una lÃ­nea</a></li>
<li class="chapter" data-level="11.6" data-path="10-BadControlsStata.html"><a href="#soluciones-estimadores-modernos-y-gr%C3%A1fico-comparativo-de-estudios-de-evento"><i class="fa fa-check"></i><b>11.6</b> 6) â€œSolucionesâ€: estimadores modernos y grÃ¡fico comparativo de estudios de evento</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="10-BadControlsStata.html"><a href="#explicaci%C3%B3n-did%C3%A1ctica-1"><i class="fa fa-check"></i><b>11.6.1</b> ExplicaciÃ³n didÃ¡ctica</a></li>
<li class="chapter" data-level="11.6.2" data-path="10-BadControlsStata.html"><a href="#c%C3%B3digo-copiarpegar-1"><i class="fa fa-check"></i><b>11.6.2</b> CÃ³digo (copiar/pegar)</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="cÃ³mo-interpretar-la-salida-de-bacondecomp.html"><a href="cÃ³mo-interpretar-la-salida-de-bacondecomp.html"><i class="fa fa-check"></i><b>11.7</b> 7) Puntos de aprendizaje (resumen)</a></li>
<li class="chapter" data-level="11.8" data-path="10-BadControlsStata.html"><a href="#notas-pr%C3%A1cticas-de-ejecuci%C3%B3n"><i class="fa fa-check"></i><b>11.8</b> 8) Notas prÃ¡cticas de ejecuciÃ³n</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cortes Transversales</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="malos-controles-en-stata" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Capitulo 9</span> Malos Controles en Stata<a href="malos-controles-en-stata.html#malos-controles-en-stata" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="boxinfo">
<p><strong>ğŸ¯ Metas de aprendizaje</strong>
- Ver por quÃ© controlar un <strong>mediador</strong> (variable post-tratamiento) <strong>reduce</strong> el coeficiente de <span class="math inline">\(D\)</span> cuando queremos el <strong>efecto total</strong>.<br />
- Entender, con un ejemplo separado y simple, quÃ© es un <strong>colisionador</strong> y por quÃ© controlarlo abre un camino espurio que sesga el estimador.<br />
- Confirmar con un <strong>Mini-Monte Carlo</strong> que estos sesgos aparecen en promedio.<br />
- Visualizar los resultados con <strong>coefplots</strong> e <strong>histogramas</strong>.</p>
</div>
<hr />
<div id="mediador-post-tratamiento" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Mediador (post-tratamiento)<a href="malos-controles-en-stata.html#mediador-post-tratamiento" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Idea:</strong> <span class="math inline">\(D\)</span> afecta a <span class="math inline">\(Y\)</span>. TambiÃ©n <span class="math inline">\(D\)</span> afecta una variable <span class="math inline">\(M\)</span> (post-tratamiento), que a su vez afecta <span class="math inline">\(Y\)</span>.<br />
Si <strong>controlas <span class="math inline">\(M\)</span></strong> cuando tu objetivo es el <strong>efecto total</strong> de <span class="math inline">\(D\)</span> sobre <span class="math inline">\(Y\)</span>, â€œle quitasâ€ al coeficiente la parte del camino <span class="math inline">\(D \rightarrow M \rightarrow Y\)</span>.</p>
<div id="mediador-d-rightarrow-m-rightarrow-y" class="section level3 unnumbered hasAnchor">
<h3>Mediador: <span class="math inline">\(D \rightarrow M \rightarrow Y\)</span><a href="malos-controles-en-stata.html#mediador-d-rightarrow-m-rightarrow-y" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div style="margin:1rem 0;">
<svg width="520" height="140" viewBox="0 0 520 140" xmlns="http://www.w3.org/2000/svg"> <defs> <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="#333" /> </marker> <style> .node { fill: #fff; stroke: #333; stroke-width: 2px; } .label { font-family: sans-serif; font-size: 14px; fill: #111; dominant-baseline: middle; text-anchor: middle; } .edge { stroke: #333; stroke-width: 2px; fill: none; marker-end: url(#arrow); } </style> </defs> <!-- Nodes --> <circle class="node" cx="60" cy="70" r="24"/> <text class="label" x="60" y="70">D</text> <circle class="node" cx="220" cy="70" r="24"/> <text class="label" x="220" y="70">M</text> <circle class="node" cx="380" cy="70" r="24"/> <text class="label" x="380" y="70">Y</text> <circle class="node" cx="380" cy="24" r="24"/> <text class="label" x="380" y="24">U</text> <!-- Edges --> <line class="edge" x1="84" y1="70" x2="196" y2="70"/> <line class="edge" x1="244" y1="70" x2="356" y2="70"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- small spacer --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- (keeps marker size consistent) --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- Actual U->Y --> <path class="edge" d="M380,48 L380,46 M380,48 L380,46 M380,48 L380,46 M380,48 L380,46"/> <path class="edge" d="M380,48 L380,46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- Simple straight U->Y --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- Clean final arrow --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- Minimal final arrow (from U to Y) --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- Real arrow U->Y --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- Simpler: draw a direct line --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- Final actual line --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> <!-- Sorry for redundancy; some renderers clip short markers. --> <line class="edge" x1="380" y1="48" x2="380" y2="46"/> </svg>
<p style="font-family:sans-serif; font-size:13px; color:#333;">
<b>Nota:</b> Si tu parÃ¡metro es el <i>efecto total</i> de D sobre Y, <b>no</b> controles M.
</p>
</div>
<div class="sourceCode" id="cb88"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb88-1"><a href="malos-controles-en-stata.html#cb88-1" tabindex="-1"></a>********************************************************************************</span>
<span id="cb88-2"><a href="malos-controles-en-stata.html#cb88-2" tabindex="-1"></a>* SOLO MEDIADOR: versiÃ³n simple <span class="fu">y</span> didÃ¡ctica</span>
<span id="cb88-3"><a href="malos-controles-en-stata.html#cb88-3" tabindex="-1"></a>********************************************************************************</span>
<span id="cb88-4"><a href="malos-controles-en-stata.html#cb88-4" tabindex="-1"></a><span class="kw">clear</span> <span class="ot">all</span></span>
<span id="cb88-5"><a href="malos-controles-en-stata.html#cb88-5" tabindex="-1"></a><span class="kw">set</span> <span class="kw">more</span> <span class="kw">off</span></span>
<span id="cb88-6"><a href="malos-controles-en-stata.html#cb88-6" tabindex="-1"></a><span class="kw">set</span> <span class="dv">seed</span> 2468</span>
<span id="cb88-7"><a href="malos-controles-en-stata.html#cb88-7" tabindex="-1"></a><span class="kw">set</span> <span class="kw">obs</span> 50000</span>
<span id="cb88-8"><a href="malos-controles-en-stata.html#cb88-8" tabindex="-1"></a></span>
<span id="cb88-9"><a href="malos-controles-en-stata.html#cb88-9" tabindex="-1"></a><span class="kw">gen</span> D = (runiform()&lt;0.5)</span>
<span id="cb88-10"><a href="malos-controles-en-stata.html#cb88-10" tabindex="-1"></a><span class="kw">local</span> rho = .30</span>
<span id="cb88-11"><a href="malos-controles-en-stata.html#cb88-11" tabindex="-1"></a><span class="fu">matrix</span> C = (1, <span class="ot">`rho&#39;</span> \ <span class="ot">`rho&#39;</span>, 1)</span>
<span id="cb88-12"><a href="malos-controles-en-stata.html#cb88-12" tabindex="-1"></a><span class="kw">drawnorm</span> eY eM, <span class="fu">corr</span>(C)</span>
<span id="cb88-13"><a href="malos-controles-en-stata.html#cb88-13" tabindex="-1"></a></span>
<span id="cb88-14"><a href="malos-controles-en-stata.html#cb88-14" tabindex="-1"></a><span class="kw">replace</span> eY = 4*eY</span>
<span id="cb88-15"><a href="malos-controles-en-stata.html#cb88-15" tabindex="-1"></a><span class="kw">gen</span> Y_0 = 1 + eY</span>
<span id="cb88-16"><a href="malos-controles-en-stata.html#cb88-16" tabindex="-1"></a><span class="kw">gen</span> Y_1 = 3 + eY</span>
<span id="cb88-17"><a href="malos-controles-en-stata.html#cb88-17" tabindex="-1"></a><span class="kw">gen</span> Y   = D*Y_1 + (1-D)*Y_0</span>
<span id="cb88-18"><a href="malos-controles-en-stata.html#cb88-18" tabindex="-1"></a></span>
<span id="cb88-19"><a href="malos-controles-en-stata.html#cb88-19" tabindex="-1"></a><span class="kw">replace</span> eM = 4*eM</span>
<span id="cb88-20"><a href="malos-controles-en-stata.html#cb88-20" tabindex="-1"></a><span class="kw">gen</span> M_0 = 1 + eM</span>
<span id="cb88-21"><a href="malos-controles-en-stata.html#cb88-21" tabindex="-1"></a><span class="kw">gen</span> M_1 = 4 + eM</span>
<span id="cb88-22"><a href="malos-controles-en-stata.html#cb88-22" tabindex="-1"></a><span class="kw">gen</span> M   = D*M_1 + (1-D)*M_0</span>
<span id="cb88-23"><a href="malos-controles-en-stata.html#cb88-23" tabindex="-1"></a></span>
<span id="cb88-24"><a href="malos-controles-en-stata.html#cb88-24" tabindex="-1"></a><span class="kw">reg</span> Y D</span>
<span id="cb88-25"><a href="malos-controles-en-stata.html#cb88-25" tabindex="-1"></a><span class="kw">reg</span> Y D M</span>
<span id="cb88-26"><a href="malos-controles-en-stata.html#cb88-26" tabindex="-1"></a></span>
<span id="cb88-27"><a href="malos-controles-en-stata.html#cb88-27" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> mc_mediador</span>
<span id="cb88-28"><a href="malos-controles-en-stata.html#cb88-28" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> mc_mediador, rclass</span>
<span id="cb88-29"><a href="malos-controles-en-stata.html#cb88-29" tabindex="-1"></a>    <span class="kw">clear</span></span>
<span id="cb88-30"><a href="malos-controles-en-stata.html#cb88-30" tabindex="-1"></a>    <span class="kw">set</span> <span class="kw">obs</span> 3000</span>
<span id="cb88-31"><a href="malos-controles-en-stata.html#cb88-31" tabindex="-1"></a>    <span class="kw">gen</span> D = (runiform()&lt;0.5)</span>
<span id="cb88-32"><a href="malos-controles-en-stata.html#cb88-32" tabindex="-1"></a>    <span class="fu">matrix</span> C = (1, .30 \ .30, 1)</span>
<span id="cb88-33"><a href="malos-controles-en-stata.html#cb88-33" tabindex="-1"></a>    <span class="kw">drawnorm</span> eY eM, <span class="fu">corr</span>(C)</span>
<span id="cb88-34"><a href="malos-controles-en-stata.html#cb88-34" tabindex="-1"></a>    <span class="kw">replace</span> eY = 4*eY</span>
<span id="cb88-35"><a href="malos-controles-en-stata.html#cb88-35" tabindex="-1"></a>    <span class="kw">replace</span> eM = 4*eM</span>
<span id="cb88-36"><a href="malos-controles-en-stata.html#cb88-36" tabindex="-1"></a></span>
<span id="cb88-37"><a href="malos-controles-en-stata.html#cb88-37" tabindex="-1"></a>    <span class="kw">gen</span> Y_0 = 1 + eY</span>
<span id="cb88-38"><a href="malos-controles-en-stata.html#cb88-38" tabindex="-1"></a>    <span class="kw">gen</span> Y_1 = 3 + eY</span>
<span id="cb88-39"><a href="malos-controles-en-stata.html#cb88-39" tabindex="-1"></a>    <span class="kw">gen</span> Y   = D*Y_1 + (1-D)*Y_0</span>
<span id="cb88-40"><a href="malos-controles-en-stata.html#cb88-40" tabindex="-1"></a></span>
<span id="cb88-41"><a href="malos-controles-en-stata.html#cb88-41" tabindex="-1"></a>    <span class="kw">gen</span> M_0 = 1 + eM</span>
<span id="cb88-42"><a href="malos-controles-en-stata.html#cb88-42" tabindex="-1"></a>    <span class="kw">gen</span> M_1 = 4 + eM</span>
<span id="cb88-43"><a href="malos-controles-en-stata.html#cb88-43" tabindex="-1"></a>    <span class="kw">gen</span> M   = D*M_1 + (1-D)*M_0</span>
<span id="cb88-44"><a href="malos-controles-en-stata.html#cb88-44" tabindex="-1"></a></span>
<span id="cb88-45"><a href="malos-controles-en-stata.html#cb88-45" tabindex="-1"></a>    <span class="kw">qui</span> <span class="kw">reg</span> Y D</span>
<span id="cb88-46"><a href="malos-controles-en-stata.html#cb88-46" tabindex="-1"></a>    <span class="fu">return</span> <span class="fu">scalar</span> b_total = _b[D]</span>
<span id="cb88-47"><a href="malos-controles-en-stata.html#cb88-47" tabindex="-1"></a>    <span class="kw">qui</span> <span class="kw">reg</span> Y D M</span>
<span id="cb88-48"><a href="malos-controles-en-stata.html#cb88-48" tabindex="-1"></a>    <span class="fu">return</span> <span class="fu">scalar</span> b_directo = _b[D]</span>
<span id="cb88-49"><a href="malos-controles-en-stata.html#cb88-49" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb88-50"><a href="malos-controles-en-stata.html#cb88-50" tabindex="-1"></a></span>
<span id="cb88-51"><a href="malos-controles-en-stata.html#cb88-51" tabindex="-1"></a><span class="kw">simulate</span> b_total=<span class="fu">r</span>(b_total) b_directo=<span class="fu">r</span>(b_directo), reps(300): mc_mediador</span>
<span id="cb88-52"><a href="malos-controles-en-stata.html#cb88-52" tabindex="-1"></a><span class="kw">sum</span> b_total b_directo</span></code></pre></div>
<p><strong>Lectura esperada:</strong></p>
<ul>
<li><code>reg Y D</code> recupera el <strong>efecto total</strong>.</li>
<li><code>reg Y D M</code> da solo el <strong>efecto directo</strong>, mÃ¡s pequeÃ±o.</li>
</ul>
<div class="sourceCode" id="cb89"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb89-1"><a href="malos-controles-en-stata.html#cb89-1" tabindex="-1"></a>coefplot (<span class="kw">reg</span> Y D) (<span class="kw">reg</span> Y D M), <span class="kw">keep</span>(D) <span class="co">///</span></span>
<span id="cb89-2"><a href="malos-controles-en-stata.html#cb89-2" tabindex="-1"></a>    <span class="bn">xline</span>(0) <span class="kw">drop</span>(<span class="dt">_cons</span>) <span class="co">///</span></span>
<span id="cb89-3"><a href="malos-controles-en-stata.html#cb89-3" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">&quot;Total&quot;</span> 2 <span class="st">&quot;Directo (con M)&quot;</span>)) <span class="co">///</span></span>
<span id="cb89-4"><a href="malos-controles-en-stata.html#cb89-4" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">&quot;Mediador: coeficiente de D&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="colisionador" class="section level2 unnumbered hasAnchor">
<h2>Colisionador<a href="malos-controles-en-stata.html#colisionador" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Idea:</strong></p>
<ul>
<li><span class="math inline">\(U\)</span> afecta <span class="math inline">\(Y\)</span>.</li>
<li><span class="math inline">\(C\)</span> es causado por <span class="math inline">\(D\)</span> y por <span class="math inline">\(U\)</span>.</li>
<li>Si controlamos <span class="math inline">\(C\)</span>, se abre el camino <span class="math inline">\(D \leftrightarrow U \rightarrow Y\)</span>.</li>
</ul>
<div style="margin:1rem 0;">
<svg width="520" height="160" viewBox="0 0 520 160" xmlns="http://www.w3.org/2000/svg"> <defs> <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="#333" /> </marker> <style> .node { fill: #fff; stroke: #333; stroke-width: 2px; } .label { font-family: sans-serif; font-size: 14px; fill: #111; dominant-baseline: middle; text-anchor: middle; } .edge { stroke: #333; stroke-width: 2px; fill: none; marker-end: url(#arrow2); } </style> </defs> <!-- Nodes --> <circle class="node" cx="60" cy="90" r="24"/> <text class="label" x="60" y="90">D</text> <circle class="node" cx="220" cy="90" r="24"/> <text class="label" x="220" y="90">C</text> <circle class="node" cx="220" cy="34" r="24"/> <text class="label" x="220" y="34">U</text> <circle class="node" cx="380" cy="90" r="24"/> <text class="label" x="380" y="90">Y</text> <!-- Edges -->
<line class="edge" x1="84" y1="90" x2="196" y2="90"/> <!-- D -> C -->
<line class="edge" x1="220" y1="58" x2="220" y2="66"/> <!-- U -> C (down) -->
<line class="edge" x1="244" y1="90" x2="356" y2="90"/> <!-- C -> Y? no, U -> Y -->
<!-- Replace previous with U -> Y -->
<line class="edge" x1="244" y1="34" x2="356" y2="90"/> <!-- U -> Y (diagonal) -->
</svg>
<p style="font-family:sans-serif; font-size:13px; color:#333;">
<b>Nota:</b> Controlar <b>C</b> abre el camino <i>D âŸ· U â†’ Y</i> y sesga el efecto de <b>D</b>.
</p>
</div>
<div class="sourceCode" id="cb90"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb90-1"><a href="malos-controles-en-stata.html#cb90-1" tabindex="-1"></a>********************************************************************************</span>
<span id="cb90-2"><a href="malos-controles-en-stata.html#cb90-2" tabindex="-1"></a>* COLISIONADOR: </span>
<span id="cb90-3"><a href="malos-controles-en-stata.html#cb90-3" tabindex="-1"></a>********************************************************************************</span>
<span id="cb90-4"><a href="malos-controles-en-stata.html#cb90-4" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb90-5"><a href="malos-controles-en-stata.html#cb90-5" tabindex="-1"></a><span class="kw">set</span> <span class="kw">more</span> <span class="kw">off</span></span>
<span id="cb90-6"><a href="malos-controles-en-stata.html#cb90-6" tabindex="-1"></a><span class="kw">set</span> <span class="dv">seed</span> 2468</span>
<span id="cb90-7"><a href="malos-controles-en-stata.html#cb90-7" tabindex="-1"></a><span class="kw">set</span> <span class="kw">obs</span> 50000</span>
<span id="cb90-8"><a href="malos-controles-en-stata.html#cb90-8" tabindex="-1"></a></span>
<span id="cb90-9"><a href="malos-controles-en-stata.html#cb90-9" tabindex="-1"></a><span class="kw">gen</span> U  = rnormal()</span>
<span id="cb90-10"><a href="malos-controles-en-stata.html#cb90-10" tabindex="-1"></a><span class="kw">gen</span> eC = rnormal()</span>
<span id="cb90-11"><a href="malos-controles-en-stata.html#cb90-11" tabindex="-1"></a><span class="kw">gen</span> eY = rnormal()</span>
<span id="cb90-12"><a href="malos-controles-en-stata.html#cb90-12" tabindex="-1"></a><span class="kw">gen</span> D  = (runiform()&lt;0.5)</span>
<span id="cb90-13"><a href="malos-controles-en-stata.html#cb90-13" tabindex="-1"></a></span>
<span id="cb90-14"><a href="malos-controles-en-stata.html#cb90-14" tabindex="-1"></a><span class="kw">gen</span> C = 0.7*D + 0.7*U + eC</span>
<span id="cb90-15"><a href="malos-controles-en-stata.html#cb90-15" tabindex="-1"></a><span class="kw">gen</span> Y = 2 + 2.0*D + 1.0*U + eY</span>
<span id="cb90-16"><a href="malos-controles-en-stata.html#cb90-16" tabindex="-1"></a></span>
<span id="cb90-17"><a href="malos-controles-en-stata.html#cb90-17" tabindex="-1"></a><span class="kw">reg</span> Y D        <span class="co">// Benchmark correcto</span></span>
<span id="cb90-18"><a href="malos-controles-en-stata.html#cb90-18" tabindex="-1"></a><span class="kw">reg</span> Y D C      <span class="co">// Sesgado por controlar colisionador</span></span></code></pre></div>
<hr />
<div class="sourceCode" id="cb91"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb91-1"><a href="malos-controles-en-stata.html#cb91-1" tabindex="-1"></a></span>
<span id="cb91-2"><a href="malos-controles-en-stata.html#cb91-2" tabindex="-1"></a></span>
<span id="cb91-3"><a href="malos-controles-en-stata.html#cb91-3" tabindex="-1"></a>---</span>
<span id="cb91-4"><a href="malos-controles-en-stata.html#cb91-4" tabindex="-1"></a></span>
<span id="cb91-5"><a href="malos-controles-en-stata.html#cb91-5" tabindex="-1"></a>## Mini-Monte Carlo: Colisionador</span>
<span id="cb91-6"><a href="malos-controles-en-stata.html#cb91-6" tabindex="-1"></a></span>
<span id="cb91-7"><a href="malos-controles-en-stata.html#cb91-7" tabindex="-1"></a>```stata</span>
<span id="cb91-8"><a href="malos-controles-en-stata.html#cb91-8" tabindex="-1"></a>********************************************************************************</span>
<span id="cb91-9"><a href="malos-controles-en-stata.html#cb91-9" tabindex="-1"></a>* MONTE CARLO: Colisionador</span>
<span id="cb91-10"><a href="malos-controles-en-stata.html#cb91-10" tabindex="-1"></a>********************************************************************************</span>
<span id="cb91-11"><a href="malos-controles-en-stata.html#cb91-11" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> mc_colisionador</span>
<span id="cb91-12"><a href="malos-controles-en-stata.html#cb91-12" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> mc_colisionador, rclass</span>
<span id="cb91-13"><a href="malos-controles-en-stata.html#cb91-13" tabindex="-1"></a>    <span class="kw">clear</span></span>
<span id="cb91-14"><a href="malos-controles-en-stata.html#cb91-14" tabindex="-1"></a>    <span class="kw">set</span> <span class="kw">obs</span> 3000</span>
<span id="cb91-15"><a href="malos-controles-en-stata.html#cb91-15" tabindex="-1"></a>    <span class="kw">gen</span> U  = rnormal()</span>
<span id="cb91-16"><a href="malos-controles-en-stata.html#cb91-16" tabindex="-1"></a>    <span class="kw">gen</span> eC = rnormal()</span>
<span id="cb91-17"><a href="malos-controles-en-stata.html#cb91-17" tabindex="-1"></a>    <span class="kw">gen</span> eY = rnormal()</span>
<span id="cb91-18"><a href="malos-controles-en-stata.html#cb91-18" tabindex="-1"></a>    <span class="kw">gen</span> D  = (runiform()&lt;0.5)</span>
<span id="cb91-19"><a href="malos-controles-en-stata.html#cb91-19" tabindex="-1"></a></span>
<span id="cb91-20"><a href="malos-controles-en-stata.html#cb91-20" tabindex="-1"></a>    <span class="kw">gen</span> C = 0.7*D + 0.7*U + eC</span>
<span id="cb91-21"><a href="malos-controles-en-stata.html#cb91-21" tabindex="-1"></a>    <span class="kw">gen</span> Y = 2 + 2.0*D + 1.0*U + eY</span>
<span id="cb91-22"><a href="malos-controles-en-stata.html#cb91-22" tabindex="-1"></a></span>
<span id="cb91-23"><a href="malos-controles-en-stata.html#cb91-23" tabindex="-1"></a>    <span class="kw">qui</span> <span class="kw">reg</span> Y D</span>
<span id="cb91-24"><a href="malos-controles-en-stata.html#cb91-24" tabindex="-1"></a>    <span class="fu">return</span> <span class="fu">scalar</span> b_bench = _b[D]</span>
<span id="cb91-25"><a href="malos-controles-en-stata.html#cb91-25" tabindex="-1"></a>    <span class="kw">qui</span> <span class="kw">reg</span> Y D C</span>
<span id="cb91-26"><a href="malos-controles-en-stata.html#cb91-26" tabindex="-1"></a>    <span class="fu">return</span> <span class="fu">scalar</span> b_conC = _b[D]</span>
<span id="cb91-27"><a href="malos-controles-en-stata.html#cb91-27" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb91-28"><a href="malos-controles-en-stata.html#cb91-28" tabindex="-1"></a></span>
<span id="cb91-29"><a href="malos-controles-en-stata.html#cb91-29" tabindex="-1"></a><span class="kw">simulate</span> b_bench=<span class="fu">r</span>(b_bench) b_conC=<span class="fu">r</span>(b_conC), reps(300): mc_colisionador</span>
<span id="cb91-30"><a href="malos-controles-en-stata.html#cb91-30" tabindex="-1"></a><span class="kw">sum</span> b_bench b_conC</span></code></pre></div>
<hr />
</div>
<div id="grÃ¡ficos-de-apoyo" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> GrÃ¡ficos de apoyo<a href="#gr%C3%A1ficos-de-apoyo" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="coefplot-del-mediador" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Coefplot del mediador<a href="malos-controles-en-stata.html#coefplot-del-mediador" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb92-1"><a href="malos-controles-en-stata.html#cb92-1" tabindex="-1"></a>coefplot (<span class="kw">reg</span> Y D) (<span class="kw">reg</span> Y D M), <span class="kw">keep</span>(D) <span class="co">///</span></span>
<span id="cb92-2"><a href="malos-controles-en-stata.html#cb92-2" tabindex="-1"></a>    <span class="bn">xline</span>(0) <span class="kw">drop</span>(<span class="dt">_cons</span>) <span class="co">///</span></span>
<span id="cb92-3"><a href="malos-controles-en-stata.html#cb92-3" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">&quot;Total&quot;</span> 2 <span class="st">&quot;Directo (con M)&quot;</span>)) <span class="co">///</span></span>
<span id="cb92-4"><a href="malos-controles-en-stata.html#cb92-4" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">&quot;Mediador: coeficiente de D&quot;</span>)</span></code></pre></div>
</div>
<div id="histogramas-monte-carlo" class="section level3 hasAnchor" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Histogramas Monte Carlo<a href="malos-controles-en-stata.html#histogramas-monte-carlo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb93"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb93-1"><a href="malos-controles-en-stata.html#cb93-1" tabindex="-1"></a>* Histogramas lado a lado para mediador</span>
<span id="cb93-2"><a href="malos-controles-en-stata.html#cb93-2" tabindex="-1"></a><span class="kw">twoway</span> (<span class="kw">hist</span> b_total, <span class="kw">width</span>(.1) <span class="kw">color</span>(<span class="bn">navy</span>%40)) <span class="co">///</span></span>
<span id="cb93-3"><a href="malos-controles-en-stata.html#cb93-3" tabindex="-1"></a>       (<span class="kw">hist</span> b_directo, <span class="kw">width</span>(.1) <span class="kw">color</span>(<span class="kw">red</span>%40)), <span class="co">///</span></span>
<span id="cb93-4"><a href="malos-controles-en-stata.html#cb93-4" tabindex="-1"></a>       <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">&quot;Total&quot;</span> 2 <span class="st">&quot;Directo&quot;</span>)) <span class="co">///</span></span>
<span id="cb93-5"><a href="malos-controles-en-stata.html#cb93-5" tabindex="-1"></a>       <span class="bn">title</span>(<span class="st">&quot;DistribuciÃ³n de coef D: con y sin M&quot;</span>)</span>
<span id="cb93-6"><a href="malos-controles-en-stata.html#cb93-6" tabindex="-1"></a></span>
<span id="cb93-7"><a href="malos-controles-en-stata.html#cb93-7" tabindex="-1"></a>* Histogramas para colisionador</span>
<span id="cb93-8"><a href="malos-controles-en-stata.html#cb93-8" tabindex="-1"></a><span class="kw">twoway</span> (<span class="kw">hist</span> b_bench, <span class="kw">width</span>(.1) <span class="kw">color</span>(<span class="kw">green</span>%40)) <span class="co">///</span></span>
<span id="cb93-9"><a href="malos-controles-en-stata.html#cb93-9" tabindex="-1"></a>       (<span class="kw">hist</span> b_conC, <span class="kw">width</span>(.1) <span class="kw">color</span>(<span class="bn">orange</span>%40)), <span class="co">///</span></span>
<span id="cb93-10"><a href="malos-controles-en-stata.html#cb93-10" tabindex="-1"></a>       <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">&quot;Benchmark&quot;</span> 2 <span class="st">&quot;Con C&quot;</span>)) <span class="co">///</span></span>
<span id="cb93-11"><a href="malos-controles-en-stata.html#cb93-11" tabindex="-1"></a>       <span class="bn">title</span>(<span class="st">&quot;DistribuciÃ³n de coef D: benchmark vs. colisionador&quot;</span>)</span></code></pre></div>
<hr />
</div>
</div>
<div id="resumen-prÃ¡ctico" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Resumen prÃ¡ctico<a href="#resumen-pr%C3%A1ctico" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><strong>Mediador:</strong> si buscas el <strong>efecto total</strong>, <strong>no lo controles</strong>.</li>
<li><strong>Colisionador:</strong> nunca lo controles; introduce sesgo espurio.</li>
<li><strong>Pre-tratamiento:</strong> buenos controles para ganar precisiÃ³n.</li>
</ul>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="test-de-tendencias-paralelas-y-malos-controles.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="malos-controles-mediador-m-vs-colisionador-c-dags.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/USERNAME/REPO/edit/BRANCH/10-BadControlsStata.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf", "_main.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
